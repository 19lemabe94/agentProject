<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BB DREAM - V20 Fixed UI</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* DARK THEME */
            --bg-body: #0d0d0d; --bg-sidebar: #000000; --bg-card: #141414;
            --text-primary: #e0e0e0; --text-secondary: #888888;
            --accent: #ffffff; --border: #333333;
            --revision-bg: rgba(255, 255, 255, 0.05);
            --sunday-bg: rgba(33, 150, 243, 0.05);
            --header-bg: #1a1a1a; 
            --danger: #ff4444; --success: #4caf50; --info: #2196f3; --warning: #ff9800;
            --chart-grid: #333; 
            --overlay: rgba(0, 0, 0, 0.85);
            --footer-bg: #1f1f1f;
            
            /* TAG COLORS */
            --tag-heavy-bg: rgba(255, 68, 68, 0.15); --tag-heavy-text: #ff8888;
            --tag-light-bg: rgba(76, 175, 80, 0.15); --tag-light-text: #81c784;
            --tag-med-bg: rgba(255, 152, 0, 0.15); --tag-med-text: #ffb74d;
        }
        body.light-mode {
            /* LIGHT THEME */
            --bg-body: #f5f5f5; --bg-sidebar: #ffffff; --bg-card: #ffffff;
            --text-primary: #1a1a1a; --text-secondary: #666666;
            --accent: #000000; --border: #e0e0e0;
            --revision-bg: rgba(0, 0, 0, 0.03);
            --sunday-bg: rgba(33, 150, 243, 0.05);
            --header-bg: #f0f0f0; 
            --danger: #d32f2f; --success: #2e7d32; --info: #1976d2; --warning: #f57c00;
            --chart-grid: #ddd; 
            --overlay: rgba(255, 255, 255, 0.85);
            --footer-bg: #e9ecef;

            --tag-heavy-bg: rgba(211, 47, 47, 0.1); --tag-heavy-text: #d32f2f;
            --tag-light-bg: rgba(56, 142, 60, 0.1); --tag-light-text: #388e3c;
            --tag-med-bg: rgba(245, 124, 0, 0.1); --tag-med-text: #f57c00;
        }
        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Inter', sans-serif; background: var(--bg-body); color: var(--text-primary); margin: 0; height: 100vh; display: flex; overflow: hidden; transition: background 0.3s, color 0.3s; }

        /* ICONS */
        .icon-btn { 
            background: none; border: none; cursor: pointer; opacity: 0.5; padding: 8px; 
            position: relative; color: var(--text-primary); transition: all 0.2s ease; display: flex; align-items: center; justify-content: center;
            border-radius: 6px;
        }
        .icon-btn:hover { opacity: 1; background: rgba(255,255,255,0.05); transform: translateY(-1px); }
        .icon-btn.active { opacity: 1; background: rgba(255,255,255,0.1); }
        .icon-btn svg { width: 20px; height: 20px; stroke: currentColor; fill: none; stroke-width: 2; }
        .icon-btn[data-tooltip]:hover::after {
            content: attr(data-tooltip); position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%);
            background: var(--bg-card); color: var(--text-primary); border: 1px solid var(--border); 
            padding: 5px 10px; border-radius: 4px; font-size: 0.7rem; white-space: nowrap; 
            pointer-events: none; margin-bottom: 5px; z-index: 100; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        /* SIDEBAR */
        .sidebar { width: 260px; background: var(--bg-sidebar); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 30px 20px; flex-shrink: 0; z-index: 10; }
        .brand { margin-bottom: 40px; text-align: center; border-bottom: 1px solid var(--border); padding-bottom: 20px; }
        .brand-logo { width: 70px; height: auto; display: block; margin: 0 auto 15px auto; transition: filter 0.3s; }
        body:not(.light-mode) .brand-logo { filter: invert(1) brightness(2); }
        .brand h1 { font-family: 'Playfair Display', serif; font-size: 1.5rem; margin: 0; color: var(--accent); letter-spacing: 1px; }
        .brand span { font-size: 0.7rem; text-transform: uppercase; color: var(--text-secondary); letter-spacing: 2px; }
        .menu-item { padding: 15px; margin-bottom: 5px; border-radius: 8px; cursor: pointer; color: var(--text-secondary); font-weight: 500; display: flex; align-items: center; gap: 15px; transition: 0.2s; }
        .menu-item:hover, .menu-item.active { background: var(--bg-card); color: var(--accent); }
        .menu-item svg { width: 20px; height: 20px; stroke: currentColor; fill: none; }
        .sidebar-footer { margin-top: auto; border-top: 1px solid var(--border); padding-top: 20px; display: flex; flex-direction: column; gap: 15px; align-items: center; }
        .icon-row { display: flex; gap: 15px; }

        /* MAIN */
        .main-content { flex: 1; overflow-y: auto; padding: 40px; position: relative; }
        .view-section { display: none; animation: fadeIn 0.4s ease; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .header-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .page-title { font-family: 'Playfair Display', serif; font-size: 2rem; margin: 0; color: var(--accent); font-weight: 700; }

        /* WEEK CONTROLS */
        .week-control-panel { 
            display: flex; align-items: center; gap: 8px; background: var(--bg-card); padding: 6px 12px; 
            border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .week-display { font-family: 'Playfair Display', serif; font-weight: 700; color: var(--accent); margin: 0 15px; font-size: 1.1rem; min-width: 100px; text-align: center; }
        .divider { width: 1px; height: 20px; background: var(--border); margin: 0 5px; }

        /* TABLES */
        .excel-container { background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.2); }
        .table-scroll { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; min-width: 1000px; font-size: 0.9rem; }
        th { background: var(--header-bg); color: var(--text-secondary); padding: 15px 10px; border-bottom: 1px solid var(--border); text-align: center; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 600; }
        td { border-bottom: 1px solid var(--border); padding: 0; height: 40px; border-right: 1px solid rgba(255,255,255,0.03); }
        .row-day-start { border-top: 2px solid var(--border); }
        .row-revision td { background-color: var(--revision-bg); }
        .row-sunday td { background-color: var(--sunday-bg); }
        .row-sunday input { font-weight: 500; }
        tfoot { background: var(--footer-bg); font-weight: 700; border-top: 2px solid var(--accent); }
        tfoot td { padding: 12px 10px; text-align: center; color: var(--accent); font-size: 0.9rem; }
        tfoot td.total-label { text-align: right; padding-right: 15px; color: var(--text-secondary); text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px; }
        input, select { width: 100%; height: 100%; background: transparent; border: none; color: var(--text-primary); text-align: center; font-family: 'Inter', sans-serif; font-size: 0.9rem; transition: background 0.2s; }
        input:focus, select:focus { background: rgba(255, 255, 255, 0.05); outline: none; }
        select option { background: var(--bg-card); color: var(--text-primary); }

        /* DASHBOARD */
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .kpi-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 25px; }
        .kpi-val { font-family: 'Playfair Display', serif; font-size: 2.5rem; font-weight: 700; color: var(--accent); line-height: 1; margin-bottom: 5px; }
        .kpi-lbl { font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; }
        .charts-container { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 30px; }
        .chart-box { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 20px; height: 350px; }
        .topics-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        .topics-table th { text-align: left; padding: 10px; color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; }
        .topics-table td { padding: 10px; border-bottom: 1px solid var(--border); color: var(--text-secondary); }
        .topics-table td:first-child { color: var(--text-primary); font-weight: 500; }

        /* EDITAL */
        .edital-container { display: flex; flex-direction: column; border: 1px solid var(--border); border-radius: 8px; overflow: hidden; background: var(--bg-card); }
        .discipline-group { border-bottom: 1px solid var(--border); }
        .discipline-header { padding: 20px 25px; background: transparent; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: background 0.2s; }
        .discipline-header:hover { background: rgba(255,255,255,0.02); }
        .disc-title { font-family: 'Playfair Display', serif; font-weight: 700; font-size: 1.1rem; color: var(--accent); }
        .disc-meta { display: flex; align-items: center; gap: 15px; }
        .progress-text { font-family: 'Inter', sans-serif; font-size: 0.75rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 1px; }
        .topic-list { display: none; background: rgba(0,0,0,0.2); padding: 10px 0; border-top: 1px solid var(--border); }
        .topic-list.open { display: block; }
        .topic-item { padding: 12px 30px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px dashed rgba(255,255,255,0.05); transition: background 0.2s; }
        .topic-item:hover { background: rgba(255,255,255,0.03); }
        .custom-check-wrapper { display: flex; align-items: center; gap: 15px; flex: 1; cursor: pointer; }
        .hidden-checkbox { display: none; }
        .styled-checkbox { width: 20px; height: 20px; border: 1px solid var(--text-secondary); border-radius: 4px; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
        .hidden-checkbox:checked + .styled-checkbox { background: var(--success); border-color: var(--success); }
        .styled-checkbox::after { content: '‚úî'; font-size: 12px; color: white; display: none; }
        .hidden-checkbox:checked + .styled-checkbox::after { display: block; }
        .topic-name { font-size: 0.95rem; color: var(--text-primary); transition: color 0.3s; }
        .hidden-checkbox:checked ~ .topic-name { color: var(--text-secondary); text-decoration: line-through; }
        .time-badge { font-size: 0.7rem; font-weight: 600; padding: 4px 8px; border-radius: 4px; color: var(--text-secondary); background: rgba(255,255,255,0.05); min-width: 50px; text-align: center; }
        .time-badge.active { color: var(--info); background: rgba(33, 150, 243, 0.1); border: 1px solid rgba(33, 150, 243, 0.2); }
        .btn-schedule { opacity: 0; background: transparent; border: 1px solid var(--border); color: var(--accent); padding: 4px 10px; border-radius: 4px; font-size: 0.75rem; cursor: pointer; transition: all 0.2s; }
        .topic-item:hover .btn-schedule { opacity: 1; }
        .btn-schedule:hover { border-color: var(--accent); background: var(--accent); color: var(--bg-body); }

        /* FUTURE TAB */
        .future-hero { text-align: center; padding: 60px 20px; border: 1px dashed var(--border); border-radius: 12px; margin-bottom: 30px; background: rgba(255,255,255,0.01); }
        .future-title { font-family: 'Playfair Display', serif; font-size: 3rem; color: var(--accent); margin-bottom: 10px; }
        .notes-area { width: 100%; height: 400px; background: var(--bg-card); border: 1px solid var(--border); padding: 30px; color: var(--text-primary); font-family: 'Inter', sans-serif; resize: none; border-radius: 12px; font-size: 1rem; line-height: 1.6; outline: none; transition: border-color 0.3s;}
        .notes-area:focus { border-color: var(--accent); }

        /* --- UNIFIED MODAL SYSTEM (FIXED) --- */
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: var(--overlay); z-index: 9999; 
            display: none; align-items: center; justify-content: center; 
            backdrop-filter: blur(8px); opacity: 0; transition: opacity 0.3s ease;
        }
        .modal-overlay.open { display: flex; opacity: 1; }
        
        /* Modal Container */
        .modal-box { 
            background: var(--bg-card); width: 90%; max-width: 400px; 
            padding: 30px; border-radius: 16px; border: 1px solid var(--border); 
            text-align: center; transform: scale(0.9); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            display: flex; flex-direction: column; max-height: 90vh; /* Critical */
            position: relative;
        }
        
        .modal-box.modal-large { max-width: 800px; width: 95%; text-align: left; }
        .modal-overlay.open .modal-box { transform: scale(1); }

        /* Header / Content / Footer for Modal */
        .modal-header-area { flex-shrink: 0; margin-bottom: 20px; }
        .modal-icon { font-size: 3rem; margin-bottom: 15px; display: block; text-align: center;}
        .modal-title { font-family: 'Playfair Display', serif; font-size: 1.5rem; color: var(--accent); margin: 0 0 10px 0; }
        .modal-text { color: var(--text-secondary); font-size: 0.95rem; line-height: 1.5; }
        
        /* Scrollable Middle Area */
        #modalContentSlot { 
            flex: 1; 
            overflow-y: auto; 
            min-height: 0; /* Flexbox trick for scroll */
            margin-bottom: 20px;
            padding-right: 5px; /* Space for scrollbar */
        }

        /* Fixed Close Button (Top Right) */
        .close-modal-btn {
            position: absolute; top: 15px; right: 15px;
            background: transparent; border: none; color: var(--text-secondary);
            font-size: 1.2rem; cursor: pointer; padding: 5px; line-height: 1;
            border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;
            transition: all 0.2s;
        }
        .close-modal-btn:hover { background: rgba(255,255,255,0.1); color: var(--accent); }

        .modal-actions { flex-shrink: 0; display: flex; gap: 10px; justify-content: center; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.05); }
        .btn-modal { padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; border: none; font-size: 0.9rem; transition: 0.2s; min-width: 100px; }
        .btn-cancel { background: transparent; border: 1px solid var(--border); color: var(--text-primary); }
        .btn-cancel:hover { background: rgba(255,255,255,0.05); color: var(--accent); }
        .btn-confirm { color: white; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .btn-confirm:hover { filter: brightness(1.1); transform: translateY(-1px); }
        
        .modal-danger .btn-confirm { background: var(--danger); } .modal-danger .modal-icon { color: var(--danger); }
        .modal-info .btn-confirm { background: var(--info); } .modal-info .modal-icon { color: var(--info); }
        .modal-success .btn-confirm { background: var(--success); } .modal-success .modal-icon { color: var(--success); }
        .modal-warning .btn-confirm { background: var(--warning); } .modal-warning .modal-icon { color: var(--warning); }

        /* CYCLE CONTENT STYLES */
        .cycle-day { border-left: 2px solid var(--border); padding-left: 20px; margin-bottom: 25px; position: relative; }
        .cycle-day::before { content: ''; position: absolute; left: -6px; top: 0; width: 10px; height: 10px; border-radius: 50%; background: var(--accent); }
        .day-title { color: var(--accent); font-weight: 700; margin-bottom: 10px; font-size: 1.1rem; }
        .day-focus { margin-bottom: 8px; font-size: 0.9rem; line-height: 1.4; color: var(--text-secondary); }
        .tag { padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; margin-right: 8px; }
        .tag-heavy { background: var(--tag-heavy-bg); color: var(--tag-heavy-text); }
        .tag-light { background: var(--tag-light-bg); color: var(--tag-light-text); }
        .tag-med { background: var(--tag-med-bg); color: var(--tag-med-text); }
        .action-item { background: rgba(255,255,255,0.03); padding: 10px; border-radius: 6px; margin-top: 8px; font-style: italic; font-size: 0.9rem; border-left: 2px solid var(--info); color: var(--text-primary); }
        .cycle-footer-tip { margin-top: 20px; padding-top: 20px; border-top: 1px dashed var(--border); }
        .tip-title { font-size: 0.8rem; text-transform: uppercase; color: var(--info); letter-spacing: 1px; margin-bottom: 5px; }
        .tip-content { font-family: 'Inter', sans-serif; font-size: 0.95rem; color: var(--text-primary); font-style: italic; }

        @media (max-width: 768px) {
            body { flex-direction: column; height: auto; }
            .sidebar { width: 100%; flex-direction: row; height: 60px; padding: 10px 15px; position: fixed; top: 0; align-items: center; justify-content: space-between; }
            .brand-logo { display: none; } .brand { border: none; margin: 0; padding: 0; display: flex; align-items: center; gap: 10px; } .brand span { display: none; } .brand h1 { font-size: 1.2rem; margin: 0; }
            .main-content { padding-top: 80px; padding-left: 10px; padding-right: 10px; }
            .charts-container { grid-template-columns: 1fr; }
            #navMenu { display: none; position: fixed; top: 60px; left: 0; width: 100%; height: calc(100vh - 60px); background: var(--bg-body); flex-direction: column; padding: 20px; }
            #navMenu.open { display: flex; }
            .mobile-toggle { display: block; font-size: 1.5rem; color: var(--accent); }
        }
        @media (min-width: 769px) { .mobile-toggle { display: none; } #navMenu { display: flex !important; flex-direction: column; height: 100%; } }
    </style>
</head>
<body class="dark-mode">

    <div id="genericModal" class="modal-overlay">
        <div class="modal-box" id="modalBox">
            <button class="close-modal-btn" onclick="closeModal()">‚úï</button>
            <div class="modal-header-area">
                <span id="modalIcon" class="modal-icon"></span>
                <h3 id="modalTitle" class="modal-title"></h3>
                <p id="modalText" class="modal-text"></p>
            </div>
            <div id="modalContentSlot"></div> <div class="modal-actions" id="modalActions"></div>
        </div>
    </div>

    <template id="cycleTemplate">
        <div style="padding-bottom: 20px;">
            <div class="cycle-day">
                <div class="day-title">Segunda-feira: Arquitetura & Gram√°tica</div>
                <div class="day-focus"><span class="tag tag-heavy">Pesado</span> TI: Java (SE 11) - Heran√ßa, Polimorfismo, JVM.</div>
                <div class="day-focus"><span class="tag tag-light">Leve</span> PT: Crase e Coloca√ß√£o Pronominal (Bechara).</div>
                <div class="action-item">üéØ Implementar interfaces em Java e resolver 15 quest√µes de crase.</div>
            </div>
            <div class="cycle-day">
                <div class="day-title">Ter√ßa-feira: L√≥gica & Matem√°tica</div>
                <div class="day-focus"><span class="tag tag-heavy">Pesado</span> TI: Algoritmos (Pilhas, Filas, Sorts).</div>
                <div class="day-focus"><span class="tag tag-light">Leve</span> Mat: L√≥gica Proposicional e Conjuntos.</div>
                <div class="action-item">üéØ Teste de mesa Busca Bin√°ria + 10 quest√µes de nega√ß√£o l√≥gica.</div>
            </div>
            <div class="cycle-day">
                <div class="day-title">Quarta-feira: Dados, IA & Mercado</div>
                <div class="day-focus"><span class="tag tag-heavy">Pesado</span> TI: Python (Pandas/NumPy) + Machine Learning.</div>
                <div class="day-focus"><span class="tag tag-light">Leve</span> Mercado: Blockchain, Cripto, Shadow Banking.</div>
                <div class="action-item">üéØ Script Python p/ dados nulos + Leitura sobre Real Digital (Drex).</div>
            </div>
            <div class="cycle-day">
                <div class="day-title">Quinta-feira: Estat√≠stica & BD</div>
                <div class="day-focus"><span class="tag tag-heavy">Pesado</span> Estat√≠stica: Bayes, Vari√¢ncia, Normal.</div>
                <div class="day-focus"><span class="tag tag-light">Leve</span> TI: Banco de Dados (MER, Normaliza√ß√£o).</div>
                <div class="action-item">üéØ Calcular vari√¢ncia manualmente + Diagrama ER simples.</div>
            </div>
            <div class="cycle-day">
                <div class="day-title">Sexta-feira: Regula√ß√£o & Dev Moderno</div>
                <div class="day-focus"><span class="tag tag-heavy">Pesado</span> Banc√°rios: SFN, Lavagem de Dinheiro, LGPD.</div>
                <div class="day-focus"><span class="tag tag-light">Leve</span> TI: TypeScript e NoSQL (MongoDB).</div>
                <div class="action-item">üéØ Resumo comparativo BACEN vs CVM.</div>
            </div>
            <div class="cycle-day">
                <div class="day-title">S√°bado: Fechamento</div>
                <div class="day-focus"><span class="tag tag-heavy">Pesado</span> TI: Mobile (React Native) e Ansible.</div>
                <div class="day-focus"><span class="tag tag-med">M√©dio</span> Mat: Matrizes, Determinantes, PA/PG.</div>
                <div class="day-focus"><span class="tag tag-light">Leve</span> Ingl√™s T√©cnico.</div>
                <div class="action-item">üéØ Ciclo de vida React Native + 10 quest√µes PA/PG.</div>
            </div>
            <div class="cycle-day" style="border-color: var(--info);">
                <div class="day-title" style="color: var(--info);">Domingo: O Grande Filtro</div>
                <div class="day-focus">Recupera√ß√£o Ativa (Sem material de consulta).</div>
                <div class="action-item">üöÄ Flashcards e ajuste de rota nas dificuldades da semana.</div>
            </div>
            <div class="cycle-footer-tip">
                <div class="tip-title">üì° Radar Estrat√©gico (Suas Anota√ß√µes):</div>
                <div class="tip-content" id="cycleDynamicTip">...</div>
            </div>
        </div>
    </template>

    <aside class="sidebar">
        <div class="brand">
            <img src="https://cdn.freebiesupply.com/logos/large/2x/banco-do-brasil-01-logo-black-and-white.png" alt="BB Logo" class="brand-logo">
            <h1>Escritu√°rio BB</h1>
            <span>Agente de Tecnologia</span>
        </div>
        <div class="mobile-toggle" onclick="document.getElementById('navMenu').classList.toggle('open')">‚ò∞</div>
        
        <div id="navMenu">
            <div class="menu-item active" onclick="switchView('table')"><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M3 3h18v18H3zM3 9h18M3 15h18M9 3v18M15 3v18"/></svg>Cronograma</div>
            <div class="menu-item" onclick="switchView('dashboard')"><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M18 20V10M12 20V4M6 20v-6"/></svg>Analytics</div>
            <div class="menu-item" onclick="switchView('edital')"><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>Edital 2022</div>
            <div class="menu-item" onclick="switchView('future')"><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>Futuro 2026</div>
            
            <div class="sidebar-footer">
                <div class="icon-row">
                    <button class="icon-btn" onclick="exportData()" data-tooltip="Baixar Backup"><svg viewBox="0 0 24 24" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/></svg></button>
                    <button class="icon-btn" onclick="document.getElementById('fileInput').click()" data-tooltip="Restaurar"><svg viewBox="0 0 24 24" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/></svg></button>
                </div>
                <div class="icon-row">
                    <button class="icon-btn active" id="btnDark" onclick="setTheme('dark')" data-tooltip="Dark"><svg viewBox="0 0 24 24" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button>
                    <button class="icon-btn" id="btnLight" onclick="setTheme('light')" data-tooltip="Light"><svg viewBox="0 0 24 24" stroke-width="2"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line></svg></button>
                </div>
            </div>
        </div>
    </aside>

    <main class="main-content">
        <div id="view-table" class="view-section active">
            <div class="header-bar">
                <h2 class="page-title">Cronograma</h2>
                <div class="week-control-panel">
                    <button class="icon-btn" onclick="changeWeek(-1)" data-tooltip="Anterior"><svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"></polyline></svg></button>
                    <span id="weekDisplay" class="week-display">SEMANA 1</span>
                    <button class="icon-btn" onclick="changeWeek(1)" data-tooltip="Pr√≥xima"><svg viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"></polyline></svg></button>
                    <div class="divider"></div>
                    <button class="icon-btn" onclick="openCycleModal()" data-tooltip="Ver Ciclo Semanal"><svg viewBox="0 0 24 24"><path d="M9 11l3 3L22 4"></path><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg></button>
                    <button class="icon-btn" onclick="generateSundayReview()" data-tooltip="Gerar Revis√£o Auto"><svg viewBox="0 0 24 24"><path d="M23 4v6h-6"></path><path d="M1 20v-6h6"></path><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg></button>
                    <button class="icon-btn" onclick="askAddWeek()" data-tooltip="Nova Semana"><svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></button>
                    <button class="icon-btn" onclick="askDeleteWeek()" data-tooltip="Excluir" style="color:var(--danger)"><svg viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button>
                </div>
            </div>
            <div class="excel-container">
                <div class="table-scroll">
                    <table id="mainTable">
                        <thead>
                            <tr>
                                <th style="width:40px">DIA</th><th style="width:200px">DISCIPLINA</th>
                                <th style="width:60px">CARGA</th><th style="width:200px">T√ìPICO</th>
                                <th style="width:60px">P.INI</th><th style="width:60px">P.FIM</th>
                                <th style="width:60px">Q.TOT</th><th style="width:60px">Q.OK</th>
                                <th style="width:60px">%</th><th style="width:80px">H.LIQ</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody"></tbody>
                        <tfoot id="tableFooter"></tfoot>
                    </table>
                </div>
            </div>
        </div>

        <div id="view-dashboard" class="view-section">
            <div class="header-bar"><h2 class="page-title">Analytics</h2></div>
            <div class="dashboard-grid">
                <div class="kpi-card"><div class="kpi-lbl">Horas Totais</div><div class="kpi-val" id="dashH">0h</div></div>
                <div class="kpi-card"><div class="kpi-lbl">Quest√µes</div><div class="kpi-val" id="dashQ">0</div></div>
                <div class="kpi-card"><div class="kpi-lbl">Precis√£o Global</div><div class="kpi-val" id="dashAcc">0%</div></div>
                <div class="kpi-card"><div class="kpi-lbl">T√≥picos Vencidos</div><div class="kpi-val" id="dashTop">0</div></div>
            </div>
            <div class="charts-container">
                <div class="chart-box"><div class="chart-title">Horas por Disciplina</div><canvas id="chartHours"></canvas></div>
                <div class="chart-box"><div class="chart-title">Efici√™ncia (Top T√≥picos)</div><div style="overflow-y:auto; height:250px;"><table class="topics-table"><thead><tr><th>T√≥pico</th><th>Qtd</th><th>%</th></tr></thead><tbody id="topTopicsBody"></tbody></table></div></div>
            </div>
        </div>

        <div id="view-edital" class="view-section">
            <div class="header-bar"><h2 class="page-title">Edital 2022</h2></div>
            <div class="edital-container" id="editalContainer"></div>
        </div>

        <div id="view-future" class="view-section">
            <div class="header-bar"><h2 class="page-title">Pr√≥ximo Edital 2026</h2></div>
            <div class="future-hero"><div class="future-title">Miss√£o Futura</div><div class="future-sub">Planejamento estrat√©gico de longo prazo</div></div>
            <h3 style="color:var(--accent); margin-bottom:15px; font-family:'Playfair Display',serif;">Di√°rio de Estrat√©gia</h3>
            <textarea class="notes-area" id="futureNotes" placeholder="Registre aqui rumores de banca, novas tecnologias..." oninput="saveNotes(this.value)"></textarea>
        </div>
    </main>

    <input type="file" id="fileInput" style="display:none;" onchange="importData(this)">

    <script>
        const editalDB = {
            "L√≠ngua Portuguesa": ["Compreens√£o de textos", "Ortografia oficial", "Classe de palavras", "Crase", "Sintaxe", "Pontua√ß√£o", "Concord√¢ncia", "Reg√™ncia", "Coloca√ß√£o pronominal"],
            "Matem√°tica": ["N√∫meros inteiros/racionais", "Medidas", "Raz√µes e propor√ß√µes", "L√≥gica proposicional", "Conjuntos", "Fun√ß√µes", "Matrizes", "Determinantes", "Sistemas lineares", "Sequ√™ncias (PA/PG)"],
            "Atualidades do Mercado": ["Bancos na Era Digital", "Internet/Mobile Banking", "Open Banking", "Fintechs/Startups", "Shadow banking", "Criptomoedas/Blockchain", "PIX", "Transforma√ß√£o digital"],
            "Probabilidade e Estat√≠stica": ["Representa√ß√£o gr√°fica", "M√©dia/Mediana/Moda", "Vari√¢ncia/Desvio Padr√£o", "Probabilidade", "Teorema de Bayes", "Distribui√ß√£o Binomial/Normal", "Infer√™ncia estat√≠stica"],
            "Conhecimentos Banc√°rios": ["SFN - Estrutura", "Mercado financeiro", "Pol√≠tica monet√°ria (SELIC)", "Produtos Banc√°rios", "Mercado de C√¢mbio", "Lavagem de dinheiro", "Sigilo Banc√°rio", "LGPD", "√âtica e Compliance"],
            "Tecnologia da Informa√ß√£o": ["Aprendizagem de m√°quina", "Banco de Dados (SQL/NoSQL)", "Big Data", "Dev Mobile (Java/Kotlin/Swift)", "Estrutura de dados", "Python/Pandas/NumPy"],
            "Ingl√™s": ["Compreens√£o de Texto T√©cnico", "Vocabul√°rio Banc√°rio/TI"],
            "Reda√ß√£o": ["Texto Dissertativo-Argumentativo"]
        };
        const extraSubjects = ["REVIS√ÉO", "SIMULADO"];

        let appData = { currentWeek: 0, weeks: [], editalStatus: {}, futureNotes: "" };
        let charts = {};

        function init() {
            const s = localStorage.getItem('bb_v20_fixed');
            if(s) appData = JSON.parse(s); else createWeek();
            setTheme(localStorage.getItem('bb_theme')||'dark');
            renderTable(); renderEdital();
            document.getElementById('futureNotes').value = appData.futureNotes || "";
        }

        // --- SISTEMA DE MODAIS ---
        function showModal(type, title, text, onConfirm) {
            const overlay = document.getElementById('genericModal');
            const box = document.getElementById('modalBox');
            const icon = document.getElementById('modalIcon');
            const btnArea = document.getElementById('modalActions');
            const slot = document.getElementById('modalContentSlot');
            
            box.className = 'modal-box modal-' + type;
            slot.innerHTML = '';
            document.getElementById('modalIcon').style.display = 'block';
            
            let iconChar = '';
            if(type === 'danger') iconChar = '‚ö†Ô∏è'; if(type === 'info') iconChar = '‚ö°'; if(type === 'success') iconChar = '‚úÖ'; if(type === 'warning') iconChar = 'üõë';
            icon.innerText = iconChar;
            document.getElementById('modalTitle').innerText = title;
            document.getElementById('modalText').innerText = text;
            
            let html = `<button class="btn-modal btn-cancel" onclick="closeModal()">Cancelar</button>`;
            if(type === 'success' || (type === 'warning' && !onConfirm)) { html = `<button class="btn-modal btn-confirm" onclick="closeModal()">OK</button>`; } 
            else if (onConfirm) { html += `<button id="confirmBtn" class="btn-modal btn-confirm">Confirmar</button>`; }
            btnArea.innerHTML = html;
            if(onConfirm) { document.getElementById('confirmBtn').onclick = function() { onConfirm(); closeModal(); }; }
            overlay.classList.add('open');
        }
        function closeModal() { document.getElementById('genericModal').classList.remove('open'); }

        window.openCycleModal = function() {
            const overlay = document.getElementById('genericModal');
            const box = document.getElementById('modalBox');
            const slot = document.getElementById('modalContentSlot');
            const btnArea = document.getElementById('modalActions');
            
            // Configurar modal largo
            box.className = 'modal-box modal-large modal-info';
            document.getElementById('modalIcon').style.display = 'none'; 
            document.getElementById('modalTitle').innerText = "Ciclo de Estudos Pr√©-Edital";
            document.getElementById('modalText').innerText = ""; 
            
            const tpl = document.getElementById('cycleTemplate').content.cloneNode(true);
            const note = appData.futureNotes && appData.futureNotes.trim() !== "" ? appData.futureNotes : "Nenhuma estrat√©gia definida na aba Futuro 2026.";
            tpl.querySelector('#cycleDynamicTip').innerText = note;
            
            slot.innerHTML = '';
            slot.appendChild(tpl);
            
            btnArea.innerHTML = `<button class="btn-modal btn-confirm" onclick="closeModal()">Fechar</button>`;
            overlay.classList.add('open');
        }

        // ACTIONS
        window.askAddWeek = function() { showModal('info', 'Nova Semana', 'Iniciar nova semana?', () => { createWeek(); renderTable(); }); }
        window.askDeleteWeek = function() {
            if(appData.weeks.length <= 1) { showModal('warning', 'A√ß√£o Bloqueada', 'N√£o √© poss√≠vel excluir a √∫nica semana.'); return; }
            showModal('danger', 'Excluir Semana', 'A√ß√£o irrevers√≠vel.', () => { appData.weeks.splice(appData.currentWeek, 1); appData.currentWeek = Math.max(0, appData.currentWeek - 1); save(); renderTable(); });
        }
        window.askAddToPlan = function(disc, topic) {
            showModal('info', 'Agendar T√≥pico', `Adicionar "${topic}" √† semana atual?`, () => {
                const rows = appData.weeks[appData.currentWeek];
                const slot = rows.find(r => r.topic === "" && r.type === "standard");
                if(slot) { slot.subject = disc; slot.topic = topic; save(); renderTable(); switchView('table'); } 
                else { showModal('warning', 'Sem Espa√ßo', 'Sem hor√°rios livres na semana.'); }
            });
        }
        window.generateSundayReview = function() {
            const currentWeekRows = appData.weeks[appData.currentWeek];
            const studied = [];
            currentWeekRows.forEach(row => { if(row.day !== 'DOM' && row.subject && row.topic && row.subject !== 'REVIS√ÉO' && !studied.find(t=>t.s===row.subject&&t.t===row.topic)) studied.push({s:row.subject, t:row.topic}); });
            if(studied.length === 0) { showModal('warning', 'Vazio', 'Nada estudado para revisar.'); return; }
            showModal('info', 'Gerar Revis√£o', `Criar revis√£o para ${studied.length} t√≥picos no Domingo?`, () => {
                const noSunday = currentWeekRows.filter(r => r.day !== 'DOM');
                studied.forEach(i => noSunday.push({ day: 'DOM', load: '30', type: 'sunday', subject: i.s, topic: i.t+' (Rev)', p1:'', p2:'', qT:'', qC:'', h:'' }));
                appData.weeks[appData.currentWeek] = noSunday; save(); renderTable();
            });
        }

        // CORE
        function createWeek() {
            const days = ['SEG','TER','QUA','QUI','SEX','SAB'];
            let rows = [];
            days.forEach(d => { for(let i=0; i<4; i++) rows.push(makeRow(d, '60', 'standard')); rows.push(makeRow(d, '30', 'revision')); });
            rows.push(makeRow('DOM', 'REVIS√ÉO', 'sunday')); 
            appData.weeks.push(rows); appData.currentWeek = appData.weeks.length - 1; save();
        }
        function makeRow(day, load, type) { return { day, load, type, subject: type==='revision'?'REVIS√ÉO':'', topic:'', p1:'', p2:'', qT:'', qC:'', h:'' }; }
        function save() { localStorage.setItem('bb_v20_fixed', JSON.stringify(appData)); }
        function saveNotes(val) { appData.futureNotes = val; save(); }
        function calculateTopicHours(tName) {
            let t = 0; appData.weeks.forEach(w => w.forEach(r => { if(r.topic && r.topic.includes(tName) && r.h) { 
                t += r.h.includes(':') ? parseInt(r.h.split(':')[0]) + parseInt(r.h.split(':')[1])/60 : parseFloat(r.h); 
            }})); return t;
        }

        // RENDERERS
        function renderTable() {
            const tbody = document.getElementById('tableBody'); tbody.innerHTML = '';
            if(!appData.weeks.length) { createWeek(); return; }
            const rows = appData.weeks[appData.currentWeek];
            document.getElementById('weekDisplay').innerText = `SEMANA ${appData.currentWeek + 1}`;
            let curDay = '', sundayCount = rows.filter(r => r.day === 'DOM').length, sunRender = false;

            rows.forEach((r, i) => {
                const tr = document.createElement('tr');
                const isNewDay = r.day !== curDay;
                if(isNewDay) { tr.classList.add('row-day-start'); curDay = r.day; }
                if(r.type === 'revision') tr.classList.add('row-revision');
                if(r.day === 'DOM') tr.classList.add('row-sunday');

                let dayHtml = '';
                if (isNewDay) {
                    let span = r.day === 'DOM' ? sundayCount : 5;
                    if(r.day !== 'DOM' || !sunRender) {
                        dayHtml = `<td rowspan="${span}" style="vertical-align:middle; border-right:2px solid var(--border);"><div style="writing-mode:vertical-lr; transform:rotate(180deg); text-align:center; font-weight:800; letter-spacing:2px; color:var(--accent); width:100%; display:flex; justify-content:center; align-items:center; height:100px;">${r.day}</div></td>`;
                        if(r.day === 'DOM') sunRender = true;
                    }
                }

                let subOpts = `<option value="">Selecione...</option>`;
                [...Object.keys(editalDB), ...extraSubjects].forEach(s => subOpts += `<option value="${s}" ${r.subject===s?'selected':''}>${s}</option>`);
                let topOpts = `<option value="">...</option>`;
                if(editalDB[r.subject]) { editalDB[r.subject].forEach(t => topOpts += `<option value="${t}" ${r.topic===t?'selected':''}>${t}</option>`); }
                else if(r.topic) { topOpts += `<option value="${r.topic}" selected>${r.topic}</option>`; }

                let pct = '-'; let col = 'var(--text-secondary)';
                if(r.qT > 0 && r.qC !== '') { const v = Math.round((r.qC/r.qT)*100); pct = v+'%'; if(v>=80) col='var(--success)'; else if(v>=60) col='#ffeb3b'; else col='var(--danger)'; }

                let html = dayHtml + `<td><select onchange="updateSubject(${i}, this.value)">${subOpts}</select></td><td style="text-align:center; color:var(--text-secondary);">${r.load}</td><td><select onchange="upd(${i},'topic',this.value)">${topOpts}</select></td><td><input type="number" value="${r.p1}" onchange="upd(${i},'p1',this.value)"></td><td><input type="number" value="${r.p2}" onchange="upd(${i},'p2',this.value)"></td><td><input type="number" value="${r.qT}" onchange="upd(${i},'qT',this.value)"></td><td><input type="number" value="${r.qC}" onchange="upd(${i},'qC',this.value)"></td><td style="text-align:center; color:${col}; font-weight:700;">${pct}</td><td><input value="${r.h}" onchange="upd(${i},'h',this.value)"></td>`;
                tr.innerHTML = html; tbody.appendChild(tr);
            });
            updateTotals(); updateDashboard();
        }

        function updateTotals() {
            const rows = appData.weeks[appData.currentWeek];
            let tPlan=0, tPages=0, tQ=0, tC=0, tH=0;
            rows.forEach(r => {
                if(r.load && !isNaN(r.load)) tPlan += parseInt(r.load);
                if(r.p1 && r.p2) tPages += (parseInt(r.p2)-parseInt(r.p1));
                if(r.qT) tQ += parseInt(r.qT); if(r.qC) tC += parseInt(r.qC);
                if(r.h) { tH += r.h.includes(':') ? parseInt(r.h.split(':')[0]) + parseInt(r.h.split(':')[1])/60 : parseFloat(r.h); }
            });
            const pct = tQ > 0 ? Math.round((tC/tQ)*100)+'%' : '-';
            const hPlan = Math.floor(tPlan/60);
            document.getElementById('tableFooter').innerHTML = `<tr><td colspan="2" class="total-label">TOTAIS SEMANAIS</td><td>${hPlan}h</td><td>-</td><td>-</td><td style="color:var(--accent); font-weight:700">${tPages}pg</td><td style="color:var(--info); font-weight:700">${tQ}</td><td style="color:var(--success); font-weight:700">${tC}</td><td style="font-weight:700">${pct}</td><td style="color:var(--accent); font-weight:700">${tH.toFixed(1)}h</td></tr>`;
        }

        window.upd = function(i, k, v) { appData.weeks[appData.currentWeek][i][k] = v; save(); renderTable(); }
        window.updateSubject = function(i, val) { appData.weeks[appData.currentWeek][i].subject = val; appData.weeks[appData.currentWeek][i].topic = ''; save(); renderTable(); }
        window.changeWeek = function(d) { const n = appData.currentWeek + d; if(n >= 0 && n < appData.weeks.length) { appData.currentWeek = n; renderTable(); } }

        function renderEdital() {
            const container = document.getElementById('editalContainer'); container.innerHTML = '';
            for(const [disc, topics] of Object.entries(editalDB)) {
                const total = topics.length; const done = topics.filter(t => appData.editalStatus[t]).length;
                const pct = Math.round((done/total)*100);
                const card = document.createElement('div'); card.className = 'discipline-group';
                card.innerHTML = `<div class="discipline-header" onclick="this.nextElementSibling.classList.toggle('open')"><span class="disc-title">${disc}</span><div class="disc-meta"><span class="progress-text">${done}/${total} VENCIDOS</span><span style="font-weight:700; color:var(--accent);">${pct}%</span></div></div><ul class="topic-list">${topics.map(t => {
                    const ck = appData.editalStatus[t] ? 'checked' : '';
                    const hours = calculateTopicHours(t);
                    const badgeClass = hours > 0 ? 'time-badge active' : 'time-badge';
                    return `<li class="topic-item"><label class="custom-check-wrapper"><input type="checkbox" class="hidden-checkbox" ${ck} onchange="toggleTopic('${t}')"><div class="styled-checkbox"></div><span class="topic-name">${t}</span></label><div class="topic-actions"><span class="${badgeClass}">${hours.toFixed(1)}h</span><button class="btn-schedule" onclick="askAddToPlan('${disc}', '${t}')">Agendar</button></div></li>`
                }).join('')}</ul>`;
                container.appendChild(card);
            }
        }
        window.toggleTopic = function(t) { appData.editalStatus[t] = !appData.editalStatus[t]; save(); renderEdital(); updateDashboard(); }

        function updateDashboard() {
            let totalH=0, totalQ=0, totalC=0; let subStats = {}; let topicStats = {};
            appData.weeks.forEach(w => { w.forEach(r => {
                const q = parseInt(r.qT)||0; const c = parseInt(r.qC)||0;
                let h = 0; if(r.h) h = r.h.includes(':') ? parseInt(r.h.split(':')[0]) + parseInt(r.h.split(':')[1])/60 : parseFloat(r.h);
                totalH += h; totalQ += q; totalC += c;
                if(r.subject && !extraSubjects.includes(r.subject)) {
                    if(!subStats[r.subject]) subStats[r.subject] = {h:0, q:0, c:0};
                    subStats[r.subject].h += h;
                    if(r.topic) { if(!topicStats[r.topic]) topicStats[r.topic] = {q:0, c:0}; topicStats[r.topic].q += q; topicStats[r.topic].c += c; }
                }
            });});
            document.getElementById('dashH').innerText = totalH.toFixed(1) + 'h';
            document.getElementById('dashQ').innerText = totalQ;
            document.getElementById('dashAcc').innerText = totalQ>0 ? Math.round((totalC/totalQ)*100)+'%' : '0%';
            document.getElementById('dashTop').innerText = Object.values(appData.editalStatus).filter(Boolean).length;
            const labels = Object.keys(subStats);
            const dH = labels.map(k => subStats[k].h);
            const color = getComputedStyle(document.body).getPropertyValue('--text-secondary');
            Chart.defaults.color = color; Chart.defaults.borderColor = getComputedStyle(document.body).getPropertyValue('--chart-grid');
            if(charts.h) charts.h.destroy();
            charts.h = new Chart(document.getElementById('chartHours'), { type: 'bar', data: { labels: labels, datasets: [{ label: 'Horas', data: dH, backgroundColor: '#4caf50', borderRadius:4 }] }, options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y' } });
            const tbody = document.getElementById('topTopicsBody'); tbody.innerHTML = '';
            Object.entries(topicStats).sort((a,b)=>b[1].q-a[1].q).slice(0,5).forEach(([t,d])=>{
                const p = d.q>0 ? Math.round((d.c/d.q)*100) : 0;
                tbody.innerHTML += `<tr><td style="color:var(--text-primary)">${t}</td><td>${d.q}</td><td style="font-weight:700; color:${p>=80?'var(--success)':'var(--danger)'}">${p}%</td></tr>`;
            });
        }

        window.switchView = function(v) { document.querySelectorAll('.view-section').forEach(e=>e.classList.remove('active')); document.querySelectorAll('.menu-item').forEach(e=>e.classList.remove('active')); document.getElementById('view-'+v).classList.add('active'); event.currentTarget.classList.add('active'); if(window.innerWidth <= 768) document.getElementById('navMenu').classList.remove('open'); if(v==='edital') renderEdital(); if(v==='dashboard') updateDashboard(); }
        window.setTheme = function(m) { document.body.className = m+'-mode'; document.getElementById('btnDark').classList.toggle('active', m==='dark'); document.getElementById('btnLight').classList.toggle('active', m==='light'); localStorage.setItem('bb_theme', m); }
        window.exportData = function() { const a=document.createElement('a'); a.href="data:json;charset=utf-8,"+encodeURIComponent(JSON.stringify(appData)); a.download="BB_Elegant.json"; a.click(); }
        window.importData = function(e) { const r=new FileReader(); r.onload=x=>{ try{appData=JSON.parse(x.target.result); save(); location.reload();}catch(e){showModal('danger','Erro','Arquivo inv√°lido');} }; r.readAsText(e.files[0]); }

        init();
    </script>
</body>
</html>